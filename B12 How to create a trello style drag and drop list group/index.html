<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title>jQuery: Customizable layout using drag and drop (examples) - 2. Saving and loading items</title>
	<link rel="stylesheet" type="text/css" href="style.css" media="screen" />
	<link rel="stylesheet" type="text/css" href="../devheart-examples.css" media="screen" />
</head>
<body class="dhe-body">

<div id="center-wrapper">

	<div class="dhe-example-section" id="ex-2-1">
	<button id="btn-get">Get Items</button>
	</div>

	<div class="dhe-example-section" id="ex-2-3">
		<div class="dhe-example-section-header">

			<div class="dhe-example-description">Items are automaticly saved to &quot;cookie-b&quot; using an event when re-arranged.</div>
		</div>
		<div class="dhe-example-section-content">

			<!-- BEGIN: XHTML for example 2.3 -->

			<div id="example-2-3">
                <div class="column "><button id="addbox">Add A Box</button></div>

				<div class="column left first" id="1">

					<ul class="sortable-list">
					    <h4>unpacked product items</h4>
						<li class="sortable-item" id="A"> item A</li>
						<li class="sortable-item" id="B"> item B</li>
						<li class="sortable-item" id="C"> item C</li>
						<li class="sortable-item" id="D"> item D</li>
						<li class="sortable-item" id="E"> item E</li>
					</ul>

				</div>

				<div class="column left" id="2">
                     <h4> Box 1</h4>
					<ul class="sortable-list">

					</ul>

				</div>

				<div class="column left">
<h4> Box 2</h4>
					<ul class="sortable-list">

					</ul>

				</div>
				<div class="column left"><h4> Box 3</h4><ul class="sortable-list"></ul></div>
				<div class="column left"><h4> Box 4</h4><ul class="sortable-list"></ul></div>



			</div>

			<div class="clearer">&nbsp;</div>

			<!-- END: XHTML for example 2.3 -->

		</div>
	</div>

	<div class="dhe-example-section" id="ex-2-4">

		<div class="dhe-example-section-content">

			<!-- BEGIN: XHTML for example 2.4 -->

			<div id="example-2-4">

 <p><input type="submit" class="input-button" id="btn-load-cookie-b" value="Load items from cookie-b" /></p>

				<div id="example-2-4-renderarea">

				</div>

			</div>

			<div class="clearer">&nbsp;</div>

			<!-- END: XHTML for example 2.4 -->

		</div>
	</div>

</div>

<!-- Example JavaScript files -->
<script type="text/javascript" src="jquery-1.12.2.js"></script>
<script type="application/javascript" src="jquery-ui-1.12.0/jquery-ui.min.js"></script>
<!--<script type="text/javascript" src="jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="jquery-ui-1.8.custom.min.js"></script>-->
<script type="text/javascript" src="jquery.cookie.js"></script>
<script type="text/javascript" src="test.js"></script>
<!-- Example jQuery code (JavaScript)  -->
<!--<script type="text/javascript">

$(document).ready(function(){

    function addNewBox(){
        newbox = "<div class=\"column left\"><ul class=\"sortable-list\"></ul></div>"
        $("#example-2-3").append(newbox);
    }
    //$("#addbox").on("click", addNewBox);
	// Get items
	function getItems(exampleNr)
	{
		var columns = [];

		$(exampleNr + ' ul.sortable-list').each(function(){
			columns.push($(this).sortable('toArray').join(','));				
		});

		return columns.join('|');
	}

	// Load items from cookie
	function loadItemsFromCookie(name)
	{
		if ( $.cookie(name) != null )
		{
			renderItems($.cookie(name));
		}
		else 
		{
			alert('No items saved in "' + name + '".');
		}	
	}

	// Render items
	function renderItems(items)
	{
		var html = '';
	
		var columns = items.split('|');
		
		for ( var c in columns )
		{
			html += '<div class="column left';

			if ( c == 0 )
			{
				html += ' first';
			}

			html += '"><ul class="sortable-list">';

			if ( columns[c] != '' )
			{
				var items = columns[c].split(',');

				for ( var i in items )
				{
					html += '<li class="sortable-item" id="' + items[i] + '">Sortable item ' + items[i] + '</li>';
				}
			}

			html += '</ul></div>';
		}

		$('#example-2-4-renderarea').html(html);
	}

	// Example 2.1: Get items
	$('#example-2-1 .sortable-list').sortable({
		connectWith: '#example-2-1 .sortable-list'
	});

	$('#btn-get').click(function(){
		alert(getItems('#example-2-1'));
	});


	// Example 2.2: Save items
	$('#btn-save').click(function(){
		$.cookie('cookie-a', getItems('#example-2-1'));

		alert('Items saved (' + $.cookie('cookie-a') + ')');
	});

	// Example 2.3: Save items automaticly
	$('#example-2-3 .sortable-list').sortable({
		connectWith: '#example-2-3 .sortable-list',
		update: function(){
			$.cookie('cookie-b', getItems('#example-2-3'));
		}
	});


	// Example 2.4: Load items
	$('#btn-load-example').click(function(){
		renderItems(getItems('#example-2-1'));
	});

	$('#btn-load-cookie-a').click(function(){
		loadItemsFromCookie('cookie-a');	
	});

	$('#btn-load-cookie-b').click(function(){
		loadItemsFromCookie('cookie-b');	
	});
$("#addbox").on("click", addNewBox);
});

</script>-->

</body>
</html>